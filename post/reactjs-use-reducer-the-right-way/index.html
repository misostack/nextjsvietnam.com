<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=home href=https://nextjsvietnam.com>
<meta name=generator content="jsguru cms">
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap">
<link rel=stylesheet href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel=stylesheet href=https://nextjsvietnam.com/themes/2022/public/main.css>
<link rel=stylesheet href=https://nextjsvietnam.com/themes/2022/public/home.css>
<link rel=stylesheet href=https://nextjsvietnam.com/themes/2022/public/page.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RWE4MLJYE6"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-RWE4MLJYE6')</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1642510310947288" crossorigin=anonymous></script>
<title>Reactjs Use Reducer the Right Way | In this article, we will learn how to extract state logic into reducer | Useful NodeJS Tricks, JavaScript Tips, Tricks and Best Practices</title>
<meta name=robots content="all">
<meta name=keywords content="reactjs,reactjs reducer">
<meta name=description content="In this article, we will learn how to extract state logic into reducer">
<meta property="og:type" content="website">
<meta property="og:image" content="https://user-images.githubusercontent.com/31009750/246856332-ece36caa-82ef-4a4f-86d9-9dad4a108929.png">
<meta property="og:image:type" content="image/jpeg">
<meta property="og:image:width" content="750">
<meta property="og:image:height" content="300">
<meta property="article:publisher" content="https://www.facebook.com/nextjsvietnam">
<meta property="article:published_time" content="2022-10-08T23:11:52+07:00">
<meta property="article:modified_time" content="2022-10-08T23:11:52+07:00">
<link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png>
<link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png>
<link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png>
<link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png>
<link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png>
<link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png>
<link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png>
<link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png>
<link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png>
<link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/manifest.json>
<meta name=msapplication-TileColor content="#ffffff">
<meta name=msapplication-TileImage content="/ms-icon-144x144.png">
<meta name=theme-color content="#ffffff">
</head>
<body class=body-nav-fixed>
<nav class="nav-fixed nav-default z-50">
<div class=container>
<div class="nav-container flex flex-wrap justify-between items-center">
<a href=https://nextjsvietnam.com class="nav-brand inline-block">
<img class=h-12 src=https://nextjsvietnam.com/themes/2022/src/assets/images/logo.png alt=Stunning>
</a>
<a href=javascript:void(0); data-menu=#menu-main_menu class=nav-menu-toggle><span class=material-icons>menu</span></a>
<ul id=menu-main_menu class="nav-menu h-0 md:h-auto">
<form class="nav-menu-search-bar md:hidden relative">
<button class="nav-menu-search-bar-search-btn absolute h-full"><svg class="w-3 h-3 text-gray-600" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.32 14.9l5.39 5.4a1 1 0 01-1.42 1.4l-5.38-5.38a8 8 0 111.41-1.41zM10 16a6 6 0 100-12 6 6 0 000 12z"/></svg>
</button>
<input name=s type=text class=w-full>
</form>
<li class=nav-menu-item>
<a class=nav-menu-link href=https://nextjsvietnam.com/categories/systemdesign>System Design
<span class=material-icons>keyboard_arrow_down</span>
</a>
<ul class=sub-menu>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/software-architecture>Software Architecture</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/microservice-architecture>Microservice Architecture</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/aws>Learn AWS The Right Way</a></li>
</ul>
</li>
<li class=nav-menu-item>
<a class=nav-menu-link href=https://nextjsvietnam.com/categories/cheatsheet>Cheatsheet
<span class=material-icons>keyboard_arrow_down</span>
</a>
<ul class=sub-menu>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/nestjs-examples>NestJS Examples</a></li>
</ul>
</li>
<li class=nav-menu-item>
<a class=nav-menu-link href=https://nextjsvietnam.com/categories/frameworks>Frameworks
<span class=material-icons>keyboard_arrow_down</span>
</a>
<ul class=sub-menu>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/nestjs>NestJS</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/reactjs>ReactJS</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/nextjs>NextJS</a></li>
</ul>
</li>
<li class=nav-menu-item>
<a class=nav-menu-link href=https://nextjsvietnam.com>Tutorials
<span class=material-icons>keyboard_arrow_down</span>
</a>
<ul class=sub-menu>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/nestjs-tutorial>NestJS Tutorial</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/reactjs-tutorial>ReactJS Tutorial</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://nextjsvietnam.com/categories/nextjs-tutorial>NextJS Tutorial</a></li>
</ul>
</li>
<li class=nav-menu-item>
<a class=nav-menu-link href=https://nextjsvietnam.com>Tools
<span class=material-icons>keyboard_arrow_down</span>
</a>
<ul class=sub-menu>
<li class=nav-menu-item><a class=nav-menu-link href=https://regex101.com/>Online Regex</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=http://www.bashoneliners.com/>Bash Online</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://www.epochconverter.com/>Unix Timestamp Conversion</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://ryanstutorials.net/bash-scripting-tutorial/>Bash Scripting</a></li>
<li class=nav-menu-item><a class=nav-menu-link href=https://explainshell.com/>Explain Shell</a></li>
</ul>
</li>
<form class="nav-menu-search-bar hidden md:flex relative">
<button class="nav-menu-search-bar-search-btn absolute h-full"><svg class="w-3 h-3 text-gray-600" fill="currentcolor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.32 14.9l5.39 5.4a1 1 0 01-1.42 1.4l-5.38-5.38a8 8 0 111.41-1.41zM10 16a6 6 0 100-12 6 6 0 000 12z"/></svg>
</button>
<input name=s type=text class=w-full>
</form>
</ul>
</div>
</div>
</nav>
<main>
<section class="container section">
<div class="page-content max-w-2xl mx-auto">
<img src=https://user-images.githubusercontent.com/31009750/246856332-ece36caa-82ef-4a4f-86d9-9dad4a108929.png class=img-responsive alt="Reactjs Use Reducer the Right Way">
<h1>Reactjs Use Reducer the Right Way</h1>
<p><strong>Post Date</strong> : 2022-10-08T23:11:52+07:00</p>
<p><strong>Modified Date</strong> : 2022-10-08T23:11:52+07:00</p>
<p>
<strong>Category:</strong>
<a class="m-1 p-1 text-xs font-bold leading-none border border-gray-200 bg-white" href=https://nextjsvietnam.com/categories/reactjs>reactjs</a>
</p>
<p>
<strong>Tags:</strong>
<a class="m-1 p-1 text-xs font-bold leading-none border border-gray-200 bg-white" href=/tags/reactjs>reactjs</a>
</p>
<p>Trong các dự án thực tế, việc 1 component chứa quá nhiều code thực hiện update states thông qua việc xử lý các sự kiện tương ứng của người dùng, sẽ khiến chúng ta thực sự bị choáng ko hề nhẹ.
Do đó thay vì có 1 đống code bên trong component lần lượt setState cho từng event một, ReactJS cung cấp cho chúng ta 1 công cụ gọi là <strong>&ldquo;Reducer&rdquo;</strong>, giúp chúng ta xử lý logic cho toàn bộ state trong component này 1 một gọn gàng.</p>
<p>Quy chế hoạt động của reducer như sau
<img src=https://user-images.githubusercontent.com/31009750/194717624-949d740f-ec9f-4058-96b0-fe3a472ee01b.png alt="Quy chế hoạt động của reducer"></p>
<p>Các bước để chuyển 1 state trong component vào Reducer sẽ như sau:</p>
<ol>
<li>Khai báo các dispatch ( nhận và xử lý các event )</li>
<li>Khai báo các reducer ( nhận và thay đổi data )</li>
<li>Đăng ký sử dụng reducer trong component ( về bản chất chính là state, nhưng code logic được tổ chức độc lập)</li>
</ol>
<p>Ví dụ: Xây dựng ứng dụng todolist với các chức năng: thêm, cập nhật, xóa, chuyển trạng thái từ pending sang done. Danh sách todolist được chia làm 2 cột: pending và done</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useReducer</span>, <span style=color:#a6e22e>useState</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
<span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Todo</span> {
  <span style=color:#a6e22e>id?</span>: <span style=color:#66d9ef>number</span>;
  <span style=color:#a6e22e>text</span>: <span style=color:#66d9ef>string</span>;
}
<span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>TodoAction</span> {
  <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;add&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;update&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;delete&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;markDone&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;markPending&#34;</span>;
  <span style=color:#a6e22e>payload</span>: <span style=color:#66d9ef>Todo</span>;
}

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>initialState</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>todos</span><span style=color:#f92672>:</span> [],
};

<span style=color:#75715e>// define dispatch actions
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleAddTask</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>dispatch</span>: <span style=color:#66d9ef>React.Dispatch</span>&lt;<span style=color:#f92672>TodoAction</span>&gt;, <span style=color:#a6e22e>text</span>: <span style=color:#66d9ef>string</span>) <span style=color:#f92672>=&gt;</span> {
  <span style=color:#75715e>// dispatch
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>dispatch</span>({
    <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;add&#34;</span>,
    <span style=color:#a6e22e>payload</span><span style=color:#f92672>:</span> {
      <span style=color:#a6e22e>text</span>,
    },
  });
};
<span style=color:#75715e>// define reducers
</span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>todoReducers</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>todos</span>: <span style=color:#66d9ef>Todo</span>[], <span style=color:#a6e22e>action</span>: <span style=color:#66d9ef>TodoAction</span>) <span style=color:#f92672>=&gt;</span> {
  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>action</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;add&#34;</span>) {
    <span style=color:#66d9ef>return</span> [...<span style=color:#a6e22e>todos</span>, { <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>Date.now</span>(), <span style=color:#a6e22e>text</span>: <span style=color:#66d9ef>action.payload.text</span> }];
  }
  <span style=color:#75715e>// default
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>throw</span> Error(<span style=color:#e6db74>`Unknown action </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>action</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
};

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>AddTask</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>props</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>onAddTask</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>text</span>: <span style=color:#66d9ef>string</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>void</span> }) <span style=color:#f92672>=&gt;</span> {
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>text</span>, <span style=color:#a6e22e>setText</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>&#34;&#34;</span>);
  <span style=color:#66d9ef>return</span> (
    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex justify-start&#34;</span>&gt;
      &lt;<span style=color:#f92672>input</span>
        <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>
        <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;border p-4 leading-6 w-1/2 m-2&#34;</span>
        <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>text</span>}
        <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Your new task&#34;</span>
        <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>setText</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)}
      /&gt;
      &lt;<span style=color:#f92672>button</span>
        <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bg-blue-600 p-4 m-2&#34;</span>
        <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() <span style=color:#f92672>=&gt;</span> {
          <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>onAddTask</span>(<span style=color:#a6e22e>text</span>);
        }}
      &gt;
        <span style=color:#a6e22e>Add</span> <span style=color:#a6e22e>task</span>
      &lt;/<span style=color:#f92672>button</span>&gt;
    &lt;/<span style=color:#f92672>div</span>&gt;
  );
};

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>StateManagementReducer() {</span>
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>todos</span>, <span style=color:#a6e22e>dispatch</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useReducer</span>(<span style=color:#a6e22e>todoReducers</span>, <span style=color:#a6e22e>initialState</span>.<span style=color:#a6e22e>todos</span>);
  <span style=color:#66d9ef>return</span> (
    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;container&#34;</span>&gt;
      &lt;<span style=color:#f92672>h1</span>&gt;<span style=color:#a6e22e>StateManagementReducer</span>&lt;/<span style=color:#f92672>h1</span>&gt;
      &lt;<span style=color:#f92672>AddTask</span> <span style=color:#a6e22e>onAddTask</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>text</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>handleAddTask</span>(<span style=color:#a6e22e>dispatch</span>, <span style=color:#a6e22e>text</span>)} /&gt;
      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-2&#34;</span>&gt;
        &lt;<span style=color:#f92672>div</span>&gt;
          {<span style=color:#a6e22e>todos</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>todo</span>) <span style=color:#f92672>=&gt;</span> (
            &lt;&gt;
              &lt;<span style=color:#f92672>div</span>&gt;{<span style=color:#a6e22e>todo</span>.<span style=color:#a6e22e>text</span>}&lt;/<span style=color:#f92672>div</span>&gt;
            &lt;/&gt;
          ))}
        &lt;/<span style=color:#f92672>div</span>&gt;
        &lt;<span style=color:#f92672>div</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
      &lt;/<span style=color:#f92672>div</span>&gt;
    &lt;/<span style=color:#f92672>div</span>&gt;
  );
}
</code></pre></div><h2 id=tips-to-write-reducers-well>Tips to write reducers well</h2>
<h3 id=1-reducers-must-be-pure>1. Reducers must be pure</h3>
<blockquote>
<p>Giống như state update, reducers chạy trong quá trình rendering ( actions được cho vào hàng đợi cho đến lần render tiếp theo). Do đó:</p>
</blockquote>
<ol>
<li>Không nên send requests</li>
<li>Không nên schedule timeouts</li>
<li>Thực hiện side effects ( hoạt động ảnh hưởng tới các component bên ngoài )</li>
<li>Cập nhật các objects và array mà ko biến đổi nó (mutate)</li>
</ol>
<h3 id=2-writing-concise-reducers-with-immer>2. Writing concise reducers with Immer</h3>
<blockquote>
<p>Immer support us to write reducers in a mutating style</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>mport</span> {<span style=color:#a6e22e>useImmerReducer</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;use-immer&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>AddTask</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./AddTask.js&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TaskList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./TaskList.js&#39;</span>;

<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>tasksReducer</span>(<span style=color:#a6e22e>draft</span>, <span style=color:#a6e22e>action</span>) {
  <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>type</span>) {
    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;added&#39;</span><span style=color:#f92672>:</span> {
      <span style=color:#a6e22e>draft</span>.<span style=color:#a6e22e>push</span>({
        <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>id</span>,
        <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>text</span>,
        <span style=color:#a6e22e>done</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
      });
      <span style=color:#66d9ef>break</span>;
    }
    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;changed&#39;</span><span style=color:#f92672>:</span> {
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>draft</span>.<span style=color:#a6e22e>findIndex</span>((<span style=color:#a6e22e>t</span>) =&gt; <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>task</span>.<span style=color:#a6e22e>id</span>);
      <span style=color:#a6e22e>draft</span>[<span style=color:#a6e22e>index</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>task</span>;
      <span style=color:#66d9ef>break</span>;
    }
    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;deleted&#39;</span><span style=color:#f92672>:</span> {
      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>draft</span>.<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>t</span>) =&gt; <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>id</span>);
    }
    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> {
      <span style=color:#66d9ef>throw</span> Error(<span style=color:#e6db74>&#39;Unknown action: &#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>action</span>.<span style=color:#a6e22e>type</span>);
    }
  }
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>TaskApp</span>() {
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>tasks</span>, <span style=color:#a6e22e>dispatch</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useImmerReducer</span>(<span style=color:#a6e22e>tasksReducer</span>, <span style=color:#a6e22e>initialTasks</span>);

  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleAddTask</span>(<span style=color:#a6e22e>text</span>) {
    <span style=color:#a6e22e>dispatch</span>({
      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;added&#39;</span>,
      <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>nextId</span><span style=color:#f92672>++</span>,
      <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>text</span>,
    });
  }

  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleChangeTask</span>(<span style=color:#a6e22e>task</span>) {
    <span style=color:#a6e22e>dispatch</span>({
      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;changed&#39;</span>,
      <span style=color:#a6e22e>task</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>task</span>,
    });
  }

  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleDeleteTask</span>(<span style=color:#a6e22e>taskId</span>) {
    <span style=color:#a6e22e>dispatch</span>({
      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;deleted&#39;</span>,
      <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>taskId</span>,
    });
  }

  <span style=color:#66d9ef>return</span> (
    <span style=color:#f92672>&lt;&gt;</span>
      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Prague</span> <span style=color:#a6e22e>itinerary</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>AddTask</span> <span style=color:#a6e22e>onAddTask</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleAddTask</span>} <span style=color:#f92672>/&gt;</span>
      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>TaskList</span>
        <span style=color:#a6e22e>tasks</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>tasks</span>}
        <span style=color:#a6e22e>onChangeTask</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleChangeTask</span>}
        <span style=color:#a6e22e>onDeleteTask</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleDeleteTask</span>}
      <span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/&gt;</span>
  );
}

<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>nextId</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>;
<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>initialTasks</span> <span style=color:#f92672>=</span> [
  {<span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Visit Kafka Museum&#39;</span>, <span style=color:#a6e22e>done</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>},
  {<span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Watch a puppet show&#39;</span>, <span style=color:#a6e22e>done</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
  {<span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Lennon Wall pic&#39;</span>, <span style=color:#a6e22e>done</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>},
];

</code></pre></div>
<div class="m-1 p-1">
<a class="m-1 p-1 text-xs font-bold leading-none border border-gray-200 bg-white" href=https://nextjsvietnam.com/categories/reactjs>reactjs</a>
</div>
</div>
</section>
<section class="container section">
<div class="max-w-2xl mx-auto">
<div class="font-heading text-2xl font-semibold">You Might Also Like</div>
<div class="mt-8 grid gap-8">
<ul class=sidebar-links>
<li><a href=/post/reactjs-fetch-data-the-right-way/>Reactjs Fetch data the right way</a></li>
<li><a href=/post/reactjs-cheatsheet/>ReactJS Cheatsheet</a></li>
<li><a href=/post/react-multi-language-app/>React Multi Language App</a></li>
<li><a href=/post/manage-your-reactjs-state-the-right-way/>Manage Your Reactjs State the Right Way</a></li>
<li><a href=/post/tim-hieu-ve-props-va-state-trong-reactjs/>Tim Hieu Ve Props Va State Trong Reactjs</a></li>
<li><a href=/post/create-new-spa-with-reactjs/>Create New Spa With Reactjs</a></li>
</ul>
</div>
</div>
</section>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1642510310947288" crossorigin=anonymous></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-1642510310947288 data-ad-slot=9309117729></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script>
</main>
<footer class=footer>
<div class="container md:flex">
<section class="footer-section-info md:basis-1/4">
<div class=address>
<a class=logo href=https://nextjsvietnam.com title=NextJSVietNam>
NextJSVietNam
</a>
<h4 class=footer-heading>
PRODUCTION MODE
<h4>
</div>
</section>
<div class="footer-section-navigation-menu md:basis-1/4">
<h4 class=footer-heading>NestJS</h4>
<ul class=footer-section-navigation-menu-links>
<li><a href=https://nextjsvietnam.com/post/khoa-hoc-nestjs-bai-06-viet-unit-test/>Khóa học NestJS - Bài 06 Hướng dẫn viết Unit Test</a></li>
<li><a href=https://nextjsvietnam.com/post/khoa-hoc-nestjs-bai-05-repository-pattern/>Khóa học NestJS Bài 05 - Repository Pattern</a></li>
<li><a href=https://nextjsvietnam.com/post/khoa-hoc-nestjs-bai-04-model-and-repository-pattern/>Khóa học NestJS Bài 04 - Model and Repository Pattern</a></li>
<li><a href=https://nextjsvietnam.com/post/khoa-hoc-nestjs-bai03/>Khóa học NestJS Bài 03 - Controllers & Views</a></li>
<li><a href=https://nextjsvietnam.com/post/khoa-hoc-nestjs-bai-02/>Khóa học Nestjs - Bài 02 - Giới thiệu mô hình MVC</a></li>
</ul>
</div>
<div class="footer-section-navigation-menu md:basis-1/4">
<h4 class=footer-heading>NextJS</h4>
<ul class=footer-section-navigation-menu-links>
<li><a href=https://nextjsvietnam.com/post/create-new-website-with-nextjs/>Create New Website With Nextjs</a></li>
<li><a href=https://nextjsvietnam.com/post/khoa-hoc-nextjs/>Khóa học NextJS - Bài 01 - Lộ trình các bài học về NextJS</a></li>
</ul>
</div>
<div class="footer-section-navigation-menu md:basis-1/4">
<h4 class=footer-heading>Cheatsheet</h4>
<ul class=footer-section-navigation-menu-links>
<li><a href=https://nextjsvietnam.com/post/happy-new-year-2024/>Happy New Year 2024</a></li>
<li><a href=https://nextjsvietnam.com/post/developer-philosophy/>Developer Philosophy</a></li>
<li><a href=https://nextjsvietnam.com/post/test-driven-development-for-beginner/>Test Driven Development for Beginner</a></li>
<li><a href=https://nextjsvietnam.com/post/100-frontend-interview-questions/>100 Frontend Interview Questions</a></li>
<li><a href=https://nextjsvietnam.com/post/chatgpt-what-can-chat-gpt-do/>Chatgpt What Can Chat Gpt Do</a></li>
</ul>
</div>
</div>
<div class=container>
<div class=text-center>
<a href><span class="material-icons text-4xl m-4">facebook</span></a>
<a href><span class="material-icons text-4xl m-4">smart_display</span></a>
</div>
<div class="text-center text-lg py-4">
Copyright @ NextJSVietNam 2022
</div>
<div class="text-center text-sm">
Powered by <a class="font-bold text-primary" href=https://gohugo.io/>Go Hugo</a> - Made
with love from <a class="font-bold text-primary" href=https://nextjsvietnam.com>NextJSVietNam</a> -
Build
Version 2024-01-03 23:05:24 +0700 +0700
</div>
</div>
</footer>
<script type=text/javascript src=https://nextjsvietnam.com/core/jquery-3.6.0.min.js></script>
<script type=text/javascript src=https://nextjsvietnam.com/themes/2022/public/main.js></script>
<script type=text/javascript src=https://nextjsvietnam.com/themes/2022/public/home.js></script>
<script async>!function(b,e,f,g,a,c,d){if(b.fbq)return;a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version='2.0',a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js'),fbq('init','1760611910980690'),fbq('track','PageView')</script>
<noscript><img height=1 width=1 style=display:none src="https://www.facebook.com/tr?id=1760611910980690&ev=PageView&noscript=1"></noscript>
</body>
</html>