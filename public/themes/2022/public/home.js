/*! For license information please see home.js.LICENSE.txt */
(()=>{var i={446:()=>{var i;(i=jQuery).fn.theiaStickySidebar=function(t){function e(t,e){return!0===t.initialized||!(i("body").width()<t.minWidth)&&(function(t,e){t.initialized=!0,0===i("#theia-sticky-sidebar-stylesheet-"+t.namespace).length&&i("head").append(i('<style id="theia-sticky-sidebar-stylesheet-'+t.namespace+'">.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>')),e.each((function(){var e={};if(e.sidebar=i(this),e.options=t||{},e.container=i(e.options.containerSelector),0==e.container.length&&(e.container=e.sidebar.parent()),e.sidebar.parents().css("-webkit-transform","none"),e.sidebar.css({position:e.options.defaultPosition,overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),e.stickySidebar=e.sidebar.find(".theiaStickySidebar"),0==e.stickySidebar.length){var a=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;e.sidebar.find("script").filter((function(i,t){return 0===t.type.length||t.type.match(a)})).remove(),e.stickySidebar=i("<div>").addClass("theiaStickySidebar").append(e.sidebar.children()),e.sidebar.append(e.stickySidebar)}e.marginBottom=parseInt(e.sidebar.css("margin-bottom")),e.paddingTop=parseInt(e.sidebar.css("padding-top")),e.paddingBottom=parseInt(e.sidebar.css("padding-bottom"));var n=e.stickySidebar.offset().top,r=e.stickySidebar.outerHeight();function s(){e.fixedScrollTop=0,e.sidebar.css({"min-height":"1px"}),e.stickySidebar.css({position:"static",width:"",transform:"none"})}e.stickySidebar.css("padding-top",1),e.stickySidebar.css("padding-bottom",1),n-=e.stickySidebar.offset().top,r=e.stickySidebar.outerHeight()-r-n,0==n?(e.stickySidebar.css("padding-top",0),e.stickySidebarPaddingTop=0):e.stickySidebarPaddingTop=1,0==r?(e.stickySidebar.css("padding-bottom",0),e.stickySidebarPaddingBottom=0):e.stickySidebarPaddingBottom=1,e.previousScrollTop=null,e.fixedScrollTop=0,s(),e.onScroll=function(e){if(e.stickySidebar.is(":visible"))if(i("body").width()<e.options.minWidth)s();else{if(e.options.disableOnResponsiveLayouts&&e.sidebar.outerWidth("none"==e.sidebar.css("float"))+50>e.container.width())return void s();var a=i(document).scrollTop(),n="static";if(a>=e.sidebar.offset().top+(e.paddingTop-e.options.additionalMarginTop)){var r,d=e.paddingTop+t.additionalMarginTop,c=e.paddingBottom+e.marginBottom+t.additionalMarginBottom,p=e.sidebar.offset().top,b=e.sidebar.offset().top+(k=e.container,v=k.height(),k.children().each((function(){v=Math.max(v,i(this).height())})),v),l=0+t.additionalMarginTop;r=e.stickySidebar.outerHeight()+d+c<i(window).height()?l+e.stickySidebar.outerHeight():i(window).height()-e.marginBottom-e.paddingBottom-t.additionalMarginBottom;var f=p-a+e.paddingTop,h=b-a-e.paddingBottom-e.marginBottom,u=e.stickySidebar.offset().top-a,g=e.previousScrollTop-a;"fixed"==e.stickySidebar.css("position")&&"modern"==e.options.sidebarBehavior&&(u+=g),"stick-to-top"==e.options.sidebarBehavior&&(u=t.additionalMarginTop),"stick-to-bottom"==e.options.sidebarBehavior&&(u=r-e.stickySidebar.outerHeight()),u=g>0?Math.min(u,l):Math.max(u,r-e.stickySidebar.outerHeight()),u=Math.max(u,f),u=Math.min(u,h-e.stickySidebar.outerHeight());var S=e.container.height()==e.stickySidebar.outerHeight();n=!S&&u==l||!S&&u==r-e.stickySidebar.outerHeight()?"fixed":a+u-e.sidebar.offset().top-e.paddingTop<=t.additionalMarginTop?"static":"absolute"}if("fixed"==n){var y=i(document).scrollLeft();e.stickySidebar.css({position:"fixed",width:o(e.stickySidebar)+"px",transform:"translateY("+u+"px)",left:e.sidebar.offset().left+parseInt(e.sidebar.css("padding-left"))-y+"px",top:"0px"})}else if("absolute"==n){var m={};"absolute"!=e.stickySidebar.css("position")&&(m.position="absolute",m.transform="translateY("+(a+u-e.sidebar.offset().top-e.stickySidebarPaddingTop-e.stickySidebarPaddingBottom)+"px)",m.top="0px"),m.width=o(e.stickySidebar)+"px",m.left="",e.stickySidebar.css(m)}else"static"==n&&s();"static"!=n&&1==e.options.updateSidebarHeight&&e.sidebar.css({"min-height":e.stickySidebar.outerHeight()+e.stickySidebar.offset().top-e.sidebar.offset().top+e.paddingBottom}),e.previousScrollTop=a}var k,v},e.onScroll(e),i(document).on("scroll."+e.options.namespace,function(i){return function(){i.onScroll(i)}}(e)),i(window).on("resize."+e.options.namespace,function(i){return function(){i.stickySidebar.css({position:"static"}),i.onScroll(i)}}(e)),"undefined"!=typeof ResizeSensor&&new ResizeSensor(e.stickySidebar[0],function(i){return function(){i.onScroll(i)}}(e))}))}(t,e),!0)}function o(i){var t;try{t=i[0].getBoundingClientRect().width}catch(i){}return void 0===t&&(t=i.width()),t}return(t=i.extend({containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",namespace:"TSS"},t)).additionalMarginTop=parseInt(t.additionalMarginTop)||0,t.additionalMarginBottom=parseInt(t.additionalMarginBottom)||0,function(t,o){e(t,o)||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),i(document).on("scroll."+t.namespace,function(t,o){return function(a){e(t,o)&&i(this).unbind(a)}}(t,o)),i(window).on("resize."+t.namespace,function(t,o){return function(a){e(t,o)&&i(this).unbind(a)}}(t,o)))}(t,this),this}}},t={};function e(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return i[o](n,n.exports,e),n.exports}e.n=i=>{var t=i&&i.__esModule?()=>i.default:()=>i;return e.d(t,{a:t}),t},e.d=(i,t)=>{for(var o in t)e.o(t,o)&&!e.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:t[o]})},e.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),(()=>{"use strict";var i;e(446),(i=jQuery)((()=>{i(".content, .sidebar").theiaStickySidebar({additionalMarginTop:120,minWidth:1024})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9COUUsRUFBRWtGLEVBQVNTLElBQzVFQyxPQUFPQyxlQUFlWCxFQUFTUyxFQUFLLENBQUVHLFlBQVksRUFBTUMsSUFBS0wsRUFBV0MsTUNKM0ViLEVBQW9COUUsRUFBSSxDQUFDZ0csRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsMEJDR3ZFL0csVUFBQUEsRUFRUkMsU0FQRyxLQUNFRCxFQUFFLHNCQUFzQkcsbUJBQW1CLENBRXZDb0Qsb0JBQXFCLElBQ3JCOUMsU0FBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3djczAwMS8uL3NyYy9qcy90aGVpYS1zdGlja3ktc2lkZWJhci5qcyIsIndlYnBhY2s6Ly93Y3MwMDEvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2NzMDAxL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3djczAwMS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2NzMDAxL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2NzMDAxLy4vc3JjL2pzL2hvbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBUaGVpYSBTdGlja3kgU2lkZWJhciB2MS43LjBcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9XZUNvZGVQaXhlbHMvdGhlaWEtc3RpY2t5LXNpZGViYXJcbiAqXG4gKiBHbHVlcyB5b3VyIHdlYnNpdGUncyBzaWRlYmFycywgbWFraW5nIHRoZW0gcGVybWFuZW50bHkgdmlzaWJsZSB3aGlsZSBzY3JvbGxpbmcuXG4gKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNiBXZUNvZGVQaXhlbHMgYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgJC5mbi50aGVpYVN0aWNreVNpZGViYXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAnY29udGFpbmVyU2VsZWN0b3InOiAnJyxcbiAgICAgICAgICAgICdhZGRpdGlvbmFsTWFyZ2luVG9wJzogMCxcbiAgICAgICAgICAgICdhZGRpdGlvbmFsTWFyZ2luQm90dG9tJzogMCxcbiAgICAgICAgICAgICd1cGRhdGVTaWRlYmFySGVpZ2h0JzogdHJ1ZSxcbiAgICAgICAgICAgICdtaW5XaWR0aCc6IDAsXG4gICAgICAgICAgICAnZGlzYWJsZU9uUmVzcG9uc2l2ZUxheW91dHMnOiB0cnVlLFxuICAgICAgICAgICAgJ3NpZGViYXJCZWhhdmlvcic6ICdtb2Rlcm4nLFxuICAgICAgICAgICAgJ2RlZmF1bHRQb3NpdGlvbic6ICdyZWxhdGl2ZScsXG4gICAgICAgICAgICAnbmFtZXNwYWNlJzogJ1RTUydcbiAgICAgICAgfTtcbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBWYWxpZGF0ZSBvcHRpb25zXG4gICAgICAgIG9wdGlvbnMuYWRkaXRpb25hbE1hcmdpblRvcCA9IHBhcnNlSW50KG9wdGlvbnMuYWRkaXRpb25hbE1hcmdpblRvcCkgfHwgMDtcbiAgICAgICAgb3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luQm90dG9tID0gcGFyc2VJbnQob3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luQm90dG9tKSB8fCAwO1xuXG4gICAgICAgIHRyeUluaXRPckhvb2tJbnRvRXZlbnRzKG9wdGlvbnMsIHRoaXMpO1xuXG4gICAgICAgIC8vIFRyeSBkb2luZyBpbml0LCBvdGhlcndpc2UgaG9vayBpbnRvIHdpbmRvdy5yZXNpemUgYW5kIGRvY3VtZW50LnNjcm9sbCBhbmQgdHJ5IGFnYWluIHRoZW4uXG4gICAgICAgIGZ1bmN0aW9uIHRyeUluaXRPckhvb2tJbnRvRXZlbnRzKG9wdGlvbnMsICR0aGF0KSB7XG4gICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHRyeUluaXQob3B0aW9ucywgJHRoYXQpO1xuXG4gICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVFNTOiBCb2R5IHdpZHRoIHNtYWxsZXIgdGhhbiBvcHRpb25zLm1pbldpZHRoLiBJbml0IGlzIGRlbGF5ZWQuJyk7XG5cbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignc2Nyb2xsLicgKyBvcHRpb25zLm5hbWVzcGFjZSwgZnVuY3Rpb24gKG9wdGlvbnMsICR0aGF0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHRyeUluaXQob3B0aW9ucywgJHRoYXQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudW5iaW5kKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfShvcHRpb25zLCAkdGhhdCkpO1xuICAgICAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplLicgKyBvcHRpb25zLm5hbWVzcGFjZSwgZnVuY3Rpb24gKG9wdGlvbnMsICR0aGF0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHRyeUluaXQob3B0aW9ucywgJHRoYXQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudW5iaW5kKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfShvcHRpb25zLCAkdGhhdCkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgZG9pbmcgaW5pdCBpZiBwcm9wZXIgY29uZGl0aW9ucyBhcmUgbWV0LlxuICAgICAgICBmdW5jdGlvbiB0cnlJbml0KG9wdGlvbnMsICR0aGF0KSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pbml0aWFsaXplZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJCgnYm9keScpLndpZHRoKCkgPCBvcHRpb25zLm1pbldpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbml0KG9wdGlvbnMsICR0aGF0KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0IHRoZSBzdGlja3kgc2lkZWJhcihzKS5cbiAgICAgICAgZnVuY3Rpb24gaW5pdChvcHRpb25zLCAkdGhhdCkge1xuICAgICAgICAgICAgb3B0aW9ucy5pbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIEFkZCBDU1NcbiAgICAgICAgICAgIHZhciBleGlzdGluZ1N0eWxlc2hlZXQgPSAkKCcjdGhlaWEtc3RpY2t5LXNpZGViYXItc3R5bGVzaGVldC0nICsgb3B0aW9ucy5uYW1lc3BhY2UpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU3R5bGVzaGVldC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAkKCdoZWFkJykuYXBwZW5kKCQoJzxzdHlsZSBpZD1cInRoZWlhLXN0aWNreS1zaWRlYmFyLXN0eWxlc2hlZXQtJyArIG9wdGlvbnMubmFtZXNwYWNlICsgJ1wiPi50aGVpYVN0aWNreVNpZGViYXI6YWZ0ZXIge2NvbnRlbnQ6IFwiXCI7IGRpc3BsYXk6IHRhYmxlOyBjbGVhcjogYm90aDt9PC9zdHlsZT4nKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICR0aGF0LmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBvID0ge307XG5cbiAgICAgICAgICAgICAgICBvLnNpZGViYXIgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBvcHRpb25zXG4gICAgICAgICAgICAgICAgby5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICAgICAgICAgIC8vIEdldCBjb250YWluZXJcbiAgICAgICAgICAgICAgICBvLmNvbnRhaW5lciA9ICQoby5vcHRpb25zLmNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICBpZiAoby5jb250YWluZXIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgby5jb250YWluZXIgPSBvLnNpZGViYXIucGFyZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHN0aWNreSBzaWRlYmFyXG4gICAgICAgICAgICAgICAgby5zaWRlYmFyLnBhcmVudHMoKS5jc3MoJy13ZWJraXQtdHJhbnNmb3JtJywgJ25vbmUnKTsgLy8gRml4IGZvciBXZWJLaXQgYnVnIC0gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTIwNTc0XG4gICAgICAgICAgICAgICAgby5zaWRlYmFyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICdwb3NpdGlvbic6IG8ub3B0aW9ucy5kZWZhdWx0UG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdyc6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIFwiYm94LXNpemluZ1wiIG11c3QgYmUgc2V0IHRvIFwiY29udGVudC1ib3hcIiBiZWNhdXNlIHdlIHNldCBhIGZpeGVkIGhlaWdodCB0byB0aGlzIGVsZW1lbnQgd2hlbiB0aGUgc3RpY2t5IHNpZGViYXIgaGFzIGEgZml4ZWQgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LWJveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXG4gICAgICAgICAgICAgICAgICAgICctbW96LWJveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXG4gICAgICAgICAgICAgICAgICAgICdib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHN0aWNreSBzaWRlYmFyIGVsZW1lbnQuIElmIG5vbmUgaGFzIGJlZW4gZm91bmQsIHRoZW4gY3JlYXRlIG9uZS5cbiAgICAgICAgICAgICAgICBvLnN0aWNreVNpZGViYXIgPSBvLnNpZGViYXIuZmluZCgnLnRoZWlhU3RpY2t5U2lkZWJhcicpO1xuICAgICAgICAgICAgICAgIGlmIChvLnN0aWNreVNpZGViYXIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIDxzY3JpcHQ+IHRhZ3MsIG90aGVyd2lzZSB0aGV5IHdpbGwgYmUgcnVuIGFnYWluIHdoZW4gYWRkZWQgdG8gdGhlIHN0aWNreVNpZGViYXIuXG4gICAgICAgICAgICAgICAgICAgIHZhciBqYXZhU2NyaXB0TUlNRVR5cGVzID0gLyg/OnRleHR8YXBwbGljYXRpb24pXFwvKD86eC0pPyg/OmphdmFzY3JpcHR8ZWNtYXNjcmlwdCkvaTtcbiAgICAgICAgICAgICAgICAgICAgby5zaWRlYmFyLmZpbmQoJ3NjcmlwdCcpLmZpbHRlcihmdW5jdGlvbiAoaW5kZXgsIHNjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcmlwdC50eXBlLmxlbmd0aCA9PT0gMCB8fCBzY3JpcHQudHlwZS5tYXRjaChqYXZhU2NyaXB0TUlNRVR5cGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyID0gJCgnPGRpdj4nKS5hZGRDbGFzcygndGhlaWFTdGlja3lTaWRlYmFyJykuYXBwZW5kKG8uc2lkZWJhci5jaGlsZHJlbigpKTtcbiAgICAgICAgICAgICAgICAgICAgby5zaWRlYmFyLmFwcGVuZChvLnN0aWNreVNpZGViYXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEdldCBleGlzdGluZyB0b3AgYW5kIGJvdHRvbSBtYXJnaW5zIGFuZCBwYWRkaW5nc1xuICAgICAgICAgICAgICAgIG8ubWFyZ2luQm90dG9tID0gcGFyc2VJbnQoby5zaWRlYmFyLmNzcygnbWFyZ2luLWJvdHRvbScpKTtcbiAgICAgICAgICAgICAgICBvLnBhZGRpbmdUb3AgPSBwYXJzZUludChvLnNpZGViYXIuY3NzKCdwYWRkaW5nLXRvcCcpKTtcbiAgICAgICAgICAgICAgICBvLnBhZGRpbmdCb3R0b20gPSBwYXJzZUludChvLnNpZGViYXIuY3NzKCdwYWRkaW5nLWJvdHRvbScpKTtcblxuICAgICAgICAgICAgICAgIC8vIEFkZCBhIHRlbXBvcmFyeSBwYWRkaW5nIHJ1bGUgdG8gY2hlY2sgZm9yIGNvbGxhcHNhYmxlIG1hcmdpbnMuXG4gICAgICAgICAgICAgICAgdmFyIGNvbGxhcHNlZFRvcEhlaWdodCA9IG8uc3RpY2t5U2lkZWJhci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgdmFyIGNvbGxhcHNlZEJvdHRvbUhlaWdodCA9IG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgICAgIG8uc3RpY2t5U2lkZWJhci5jc3MoJ3BhZGRpbmctdG9wJywgMSk7XG4gICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcygncGFkZGluZy1ib3R0b20nLCAxKTtcbiAgICAgICAgICAgICAgICBjb2xsYXBzZWRUb3BIZWlnaHQgLT0gby5zdGlja3lTaWRlYmFyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICBjb2xsYXBzZWRCb3R0b21IZWlnaHQgPSBvLnN0aWNreVNpZGViYXIub3V0ZXJIZWlnaHQoKSAtIGNvbGxhcHNlZEJvdHRvbUhlaWdodCAtIGNvbGxhcHNlZFRvcEhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoY29sbGFwc2VkVG9wSGVpZ2h0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcygncGFkZGluZy10b3AnLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyUGFkZGluZ1RvcCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvLnN0aWNreVNpZGViYXJQYWRkaW5nVG9wID0gMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY29sbGFwc2VkQm90dG9tSGVpZ2h0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcygncGFkZGluZy1ib3R0b20nLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyUGFkZGluZ0JvdHRvbSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvLnN0aWNreVNpZGViYXJQYWRkaW5nQm90dG9tID0gMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhpcyB0byBrbm93IHdoZXRoZXIgdGhlIHVzZXIgaXMgc2Nyb2xsaW5nIHVwIG9yIGRvd24uXG4gICAgICAgICAgICAgICAgby5wcmV2aW91c1Njcm9sbFRvcCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgdG9wICh2YWx1ZSkgd2hlbiB0aGUgc2lkZWJhciBoYXMgZml4ZWQgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgby5maXhlZFNjcm9sbFRvcCA9IDA7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgc2lkZWJhciB0byBkZWZhdWx0IHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXNldFNpZGViYXIoKTtcblxuICAgICAgICAgICAgICAgIG8ub25TY3JvbGwgPSBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIGlmIHRoZSBzaWRlYmFyIGlzbid0IHZpc2libGUuXG4gICAgICAgICAgICAgICAgICAgIGlmICghby5zdGlja3lTaWRlYmFyLmlzKFwiOnZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgaWYgdGhlIHdpbmRvdyBpcyB0b28gc21hbGwuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKCdib2R5Jykud2lkdGgoKSA8IG8ub3B0aW9ucy5taW5XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRTaWRlYmFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIGlmIHRoZSBzaWRlYmFyIHdpZHRoIGlzIGxhcmdlciB0aGFuIHRoZSBjb250YWluZXIgd2lkdGggKGUuZy4gdGhlIHRoZW1lIGlzIHJlc3BvbnNpdmUgYW5kIHRoZSBzaWRlYmFyIGlzIG5vdyBiZWxvdyB0aGUgY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3B0aW9ucy5kaXNhYmxlT25SZXNwb25zaXZlTGF5b3V0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpZGViYXJXaWR0aCA9IG8uc2lkZWJhci5vdXRlcldpZHRoKG8uc2lkZWJhci5jc3MoJ2Zsb2F0JykgPT0gJ25vbmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGViYXJXaWR0aCArIDUwID4gby5jb250YWluZXIud2lkdGgoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0U2lkZWJhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gJ3N0YXRpYyc7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgaGFzIHNjcm9sbGVkIGRvd24gZW5vdWdoIGZvciB0aGUgc2lkZWJhciB0byBiZSBjbGlwcGVkIGF0IHRoZSB0b3AsIHRoZW4gd2UgY2FuIGNvbnNpZGVyIGNoYW5naW5nIGl0cyBwb3NpdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbFRvcCA+PSBvLnNpZGViYXIub2Zmc2V0KCkudG9wICsgKG8ucGFkZGluZ1RvcCAtIG8ub3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luVG9wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRvcCBhbmQgYm90dG9tIG9mZnNldHMsIHVzZWQgaW4gdmFyaW91cyBjYWxjdWxhdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0VG9wID0gby5wYWRkaW5nVG9wICsgb3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luVG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldEJvdHRvbSA9IG8ucGFkZGluZ0JvdHRvbSArIG8ubWFyZ2luQm90dG9tICsgb3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luQm90dG9tO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGwgdG9wIGFuZCBib3R0b20gcG9zaXRpb25zIGFyZSByZWxhdGl2ZSB0byB0aGUgd2luZG93LCBub3QgdG8gdGhlIHBhcmVudCBlbGVtbnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lclRvcCA9IG8uc2lkZWJhci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyQm90dG9tID0gby5zaWRlYmFyLm9mZnNldCgpLnRvcCArIGdldENsZWFyZWRIZWlnaHQoby5jb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdG9wIGFuZCBib3R0b20gb2Zmc2V0cyByZWxhdGl2ZSB0byB0aGUgd2luZG93IHNjcmVlbiB0b3AgKHplcm8pIGFuZCBib3R0b20gKHdpbmRvdyBoZWlnaHQpLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbmRvd09mZnNldFRvcCA9IDAgKyBvcHRpb25zLmFkZGl0aW9uYWxNYXJnaW5Ub3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2luZG93T2Zmc2V0Qm90dG9tO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2lkZWJhclNtYWxsZXJUaGFuV2luZG93ID0gKG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpICsgb2Zmc2V0VG9wICsgb2Zmc2V0Qm90dG9tKSA8ICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaWRlYmFyU21hbGxlclRoYW5XaW5kb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dPZmZzZXRCb3R0b20gPSB3aW5kb3dPZmZzZXRUb3AgKyBvLnN0aWNreVNpZGViYXIub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd09mZnNldEJvdHRvbSA9ICQod2luZG93KS5oZWlnaHQoKSAtIG8ubWFyZ2luQm90dG9tIC0gby5wYWRkaW5nQm90dG9tIC0gb3B0aW9ucy5hZGRpdGlvbmFsTWFyZ2luQm90dG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGljTGltaXRUb3AgPSBjb250YWluZXJUb3AgLSBzY3JvbGxUb3AgKyBvLnBhZGRpbmdUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGljTGltaXRCb3R0b20gPSBjb250YWluZXJCb3R0b20gLSBzY3JvbGxUb3AgLSBvLnBhZGRpbmdCb3R0b20gLSBvLm1hcmdpbkJvdHRvbTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IG8uc3RpY2t5U2lkZWJhci5vZmZzZXQoKS50b3AgLSBzY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wRGlmZiA9IG8ucHJldmlvdXNTY3JvbGxUb3AgLSBzY3JvbGxUb3A7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBzaWRlYmFyIHBvc2l0aW9uIGlzIGZpeGVkLCB0aGVuIGl0IHdvbid0IG1vdmUgdXAgb3IgZG93biBieSBpdHNlbGYuIFNvLCB3ZSBtYW51YWxseSBhZGp1c3QgdGhlIHRvcCBjb29yZGluYXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uc3RpY2t5U2lkZWJhci5jc3MoJ3Bvc2l0aW9uJykgPT0gJ2ZpeGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLm9wdGlvbnMuc2lkZWJhckJlaGF2aW9yID09ICdtb2Rlcm4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCArPSBzY3JvbGxUb3BEaWZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8ub3B0aW9ucy5zaWRlYmFyQmVoYXZpb3IgPT0gJ3N0aWNrLXRvLXRvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBvcHRpb25zLmFkZGl0aW9uYWxNYXJnaW5Ub3A7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLm9wdGlvbnMuc2lkZWJhckJlaGF2aW9yID09ICdzdGljay10by1ib3R0b20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gd2luZG93T2Zmc2V0Qm90dG9tIC0gby5zdGlja3lTaWRlYmFyLm91dGVySGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUb3BEaWZmID4gMCkgeyAvLyBJZiB0aGUgdXNlciBpcyBzY3JvbGxpbmcgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gTWF0aC5taW4odG9wLCB3aW5kb3dPZmZzZXRUb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IC8vIElmIHRoZSB1c2VyIGlzIHNjcm9sbGluZyBkb3duLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IE1hdGgubWF4KHRvcCwgd2luZG93T2Zmc2V0Qm90dG9tIC0gby5zdGlja3lTaWRlYmFyLm91dGVySGVpZ2h0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLm1heCh0b3AsIHN0YXRpY0xpbWl0VG9wKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gTWF0aC5taW4odG9wLCBzdGF0aWNMaW1pdEJvdHRvbSAtIG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNpZGViYXIgaXMgdGhlIHNhbWUgaGVpZ2h0IGFzIHRoZSBjb250YWluZXIsIHdlIHdvbid0IHVzZSBmaXhlZCBwb3NpdGlvbmluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaWRlYmFyU2FtZUhlaWdodEFzQ29udGFpbmVyID0gby5jb250YWluZXIuaGVpZ2h0KCkgPT0gby5zdGlja3lTaWRlYmFyLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2lkZWJhclNhbWVIZWlnaHRBc0NvbnRhaW5lciAmJiB0b3AgPT0gd2luZG93T2Zmc2V0VG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNpZGViYXJTYW1lSGVpZ2h0QXNDb250YWluZXIgJiYgdG9wID09IHdpbmRvd09mZnNldEJvdHRvbSAtIG8uc3RpY2t5U2lkZWJhci5vdXRlckhlaWdodCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2Nyb2xsVG9wICsgdG9wIC0gby5zaWRlYmFyLm9mZnNldCgpLnRvcCAtIG8ucGFkZGluZ1RvcCA8PSBvcHRpb25zLmFkZGl0aW9uYWxNYXJnaW5Ub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHVjayB0byB0aGUgdG9wIG9mIHRoZSBwYWdlLiBObyBzcGVjaWFsIGJlaGF2aW9yLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ3N0YXRpYyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHVjayB0byB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAqIFBlcmZvcm1hbmNlIG5vdGljZTogSXQncyBPSyB0byBzZXQgdGhlc2UgQ1NTIHZhbHVlcyBhdCBlYWNoIHJlc2l6ZS9zY3JvbGwsIGV2ZW4gaWYgdGhleSBkb24ndCBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAqIEl0J3Mgd2F5IHNsb3dlciB0byBmaXJzdCBjaGVjayBpZiB0aGUgdmFsdWVzIGhhdmUgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSAnZml4ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBnZXRXaWR0aEZvck9iamVjdChvLnN0aWNreVNpZGViYXIpICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoJyArIHRvcCArICdweCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogKG8uc2lkZWJhci5vZmZzZXQoKS5sZWZ0ICsgcGFyc2VJbnQoby5zaWRlYmFyLmNzcygncGFkZGluZy1sZWZ0JykpIC0gc2Nyb2xsTGVmdCkgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0b3AnOiAnMHB4J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gPT0gJ2Fic29sdXRlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNzcyA9IHt9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoby5zdGlja3lTaWRlYmFyLmNzcygncG9zaXRpb24nKSAhPSAnYWJzb2x1dGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoJyArIChzY3JvbGxUb3AgKyB0b3AgLSBvLnNpZGViYXIub2Zmc2V0KCkudG9wIC0gby5zdGlja3lTaWRlYmFyUGFkZGluZ1RvcCAtIG8uc3RpY2t5U2lkZWJhclBhZGRpbmdCb3R0b20pICsgJ3B4KSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzLnRvcCA9ICcwcHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3Mud2lkdGggPSBnZXRXaWR0aEZvck9iamVjdChvLnN0aWNreVNpZGViYXIpICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcy5sZWZ0ID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8uc3RpY2t5U2lkZWJhci5jc3MoY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwb3NpdGlvbiA9PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRTaWRlYmFyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLm9wdGlvbnMudXBkYXRlU2lkZWJhckhlaWdodCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zaWRlYmFyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtaW4taGVpZ2h0Jzogby5zdGlja3lTaWRlYmFyLm91dGVySGVpZ2h0KCkgKyBvLnN0aWNreVNpZGViYXIub2Zmc2V0KCkudG9wIC0gby5zaWRlYmFyLm9mZnNldCgpLnRvcCArIG8ucGFkZGluZ0JvdHRvbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgby5wcmV2aW91c1Njcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgc2lkZWJhcidzIHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIG8ub25TY3JvbGwobyk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZWNhbGN1bGF0ZSB0aGUgc2lkZWJhcidzIHBvc2l0aW9uIG9uIGV2ZXJ5IHNjcm9sbCBhbmQgcmVzaXplLlxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdzY3JvbGwuJyArIG8ub3B0aW9ucy5uYW1lc3BhY2UsIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLm9uU2Nyb2xsKG8pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0obykpO1xuICAgICAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplLicgKyBvLm9wdGlvbnMubmFtZXNwYWNlLCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcyh7J3Bvc2l0aW9uJzogJ3N0YXRpYyd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ub25TY3JvbGwobyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfShvKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZWNhbGN1bGF0ZSB0aGUgc2lkZWJhcidzIHBvc2l0aW9uIGV2ZXJ5IHRpbWUgdGhlIHNpZGViYXIgY2hhbmdlcyBpdHMgc2l6ZS5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFJlc2l6ZVNlbnNvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJlc2l6ZVNlbnNvcihvLnN0aWNreVNpZGViYXJbMF0sIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ub25TY3JvbGwobyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KG8pKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgc2lkZWJhciB0byBpdHMgZGVmYXVsdCBzdGF0ZVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0U2lkZWJhcigpIHtcbiAgICAgICAgICAgICAgICAgICAgby5maXhlZFNjcm9sbFRvcCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIG8uc2lkZWJhci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiAnMXB4J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgby5zdGlja3lTaWRlYmFyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAnc3RhdGljJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdub25lJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGhlaWdodCBvZiBhIGRpdiBhcyBpZiBpdHMgZmxvYXRlZCBjaGlsZHJlbiB3ZXJlIGNsZWFyZWQuIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGZhaWxzIGlmIHRoZSBmbG9hdHMgYXJlIG1vcmUgdGhhbiBvbmUgbGV2ZWwgZGVlcC5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRDbGVhcmVkSGVpZ2h0KGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGUuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCAkKHRoaXMpLmhlaWdodCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFdpZHRoRm9yT2JqZWN0KG9iamVjdCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gb2JqZWN0WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpZHRoID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSBvYmplY3Qud2lkdGgoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHdpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSkoalF1ZXJ5KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwcy90aGVpYS1zdGlja3ktc2lkZWJhci5qcy5tYXBcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgXCJAL3N0eWxlcy9ob21lLnNjc3NcIjtcbmltcG9ydCBcIkAvanMvdGhlaWEtc3RpY2t5LXNpZGViYXIuanNcIjtcblxuKGZ1bmN0aW9uICgkKSB7XG4gICAgJCgoKSA9PiB7XG4gICAgICAgICQoXCIuY29udGVudCwgLnNpZGViYXJcIikudGhlaWFTdGlja3lTaWRlYmFyKHtcbiAgICAgICAgICAgIC8vIFNldHRpbmdzXG4gICAgICAgICAgICBhZGRpdGlvbmFsTWFyZ2luVG9wOiAxMjAsXG4gICAgICAgICAgICBtaW5XaWR0aDogMTAyNCxcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KShqUXVlcnkpO1xuIl0sIm5hbWVzIjpbIiQiLCJqUXVlcnkiLCJmbiIsInRoZWlhU3RpY2t5U2lkZWJhciIsIm9wdGlvbnMiLCJ0cnlJbml0IiwiJHRoYXQiLCJpbml0aWFsaXplZCIsIndpZHRoIiwibWluV2lkdGgiLCJuYW1lc3BhY2UiLCJsZW5ndGgiLCJhcHBlbmQiLCJlYWNoIiwibyIsInNpZGViYXIiLCJ0aGlzIiwiY29udGFpbmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJwYXJlbnQiLCJwYXJlbnRzIiwiY3NzIiwiZGVmYXVsdFBvc2l0aW9uIiwic3RpY2t5U2lkZWJhciIsImZpbmQiLCJqYXZhU2NyaXB0TUlNRVR5cGVzIiwiZmlsdGVyIiwiaW5kZXgiLCJzY3JpcHQiLCJ0eXBlIiwibWF0Y2giLCJyZW1vdmUiLCJhZGRDbGFzcyIsImNoaWxkcmVuIiwibWFyZ2luQm90dG9tIiwicGFyc2VJbnQiLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsImNvbGxhcHNlZFRvcEhlaWdodCIsIm9mZnNldCIsInRvcCIsImNvbGxhcHNlZEJvdHRvbUhlaWdodCIsIm91dGVySGVpZ2h0IiwicmVzZXRTaWRlYmFyIiwiZml4ZWRTY3JvbGxUb3AiLCJzdGlja3lTaWRlYmFyUGFkZGluZ1RvcCIsInN0aWNreVNpZGViYXJQYWRkaW5nQm90dG9tIiwicHJldmlvdXNTY3JvbGxUb3AiLCJvblNjcm9sbCIsImlzIiwiZGlzYWJsZU9uUmVzcG9uc2l2ZUxheW91dHMiLCJvdXRlcldpZHRoIiwic2Nyb2xsVG9wIiwiZG9jdW1lbnQiLCJwb3NpdGlvbiIsImFkZGl0aW9uYWxNYXJnaW5Ub3AiLCJ3aW5kb3dPZmZzZXRCb3R0b20iLCJvZmZzZXRUb3AiLCJvZmZzZXRCb3R0b20iLCJhZGRpdGlvbmFsTWFyZ2luQm90dG9tIiwiY29udGFpbmVyVG9wIiwiY29udGFpbmVyQm90dG9tIiwiZSIsImhlaWdodCIsIk1hdGgiLCJtYXgiLCJ3aW5kb3dPZmZzZXRUb3AiLCJ3aW5kb3ciLCJzdGF0aWNMaW1pdFRvcCIsInN0YXRpY0xpbWl0Qm90dG9tIiwic2Nyb2xsVG9wRGlmZiIsInNpZGViYXJCZWhhdmlvciIsIm1pbiIsInNpZGViYXJTYW1lSGVpZ2h0QXNDb250YWluZXIiLCJzY3JvbGxMZWZ0IiwiZ2V0V2lkdGhGb3JPYmplY3QiLCJsZWZ0IiwidHJhbnNmb3JtIiwidXBkYXRlU2lkZWJhckhlaWdodCIsIm9uIiwiUmVzaXplU2Vuc29yIiwiaW5pdCIsIm9iamVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImVyciIsImV4dGVuZCIsImNvbnNvbGUiLCJsb2ciLCJldnQiLCJ1bmJpbmQiLCJ0cnlJbml0T3JIb29rSW50b0V2ZW50cyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==